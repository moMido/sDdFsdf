const inpSearch=document.getElementById("inpSearch"),btnSearch=document.getElementById("btn"),myRow=document.getElementById("myMenu"),links=[...document.getElementsByClassName("cate")],btnLightDark=document.querySelector(".btn-dark"),secShowDetails=document.querySelector("#showDetails"),btnLoadMore=document.getElementById("loadMore"),carouselCaption=document.querySelector(".carousel-caption");let countMeal=10;btnLoadMore.onclick=()=>{countMeal+=5,displayRecipes(),countMeal>=allRecipes.length?btnLoadMore.style.display="none":btnLoadMore.style.display="inline-block",console.log(countMeal),console.log(allRecipes.length)},links.forEach(e=>{e.addEventListener("click",()=>{showRecipes(e.lastElementChild.innerHTML.toLowerCase()),countMeal=10,btnLoadMore.style.display="inline-block"})});let allRecipes;async function getRecipes(e){let t=await fetch(`https://forkify-api.herokuapp.com/api/search?q=${e}`);allRecipes=(t=await t.json()).recipes,localStorage.setItem("foods",JSON.stringify(allRecipes))}async function displayRecipes(){let e="",t;for(t=0;t<allRecipes.slice(0,countMeal).length;t++)e+=`<div class="col-sm-3 col-md-3 col-lg-2 text-center position-relative meal">
                        <img src="${allRecipes[t].image_url}" class="w-100 rounded" style="height: 200px" alt="">
                        <div class="details"  onclick="getRid(${"'"+allRecipes[t].recipe_id+"'"})">
                        <h4 class="h6">${allRecipes[t].title}</h4>
                        </div>
                    </div>`;myRow.innerHTML=e}async function showRecipes(e){await getRecipes(e),localStorage.setItem("foods",JSON.stringify(allRecipes)),displayRecipes(allRecipes)}async function getRid(e){let t=await fetch(`https://forkify-api.herokuapp.com/api/get?rId=${e}`);showDetails((t=await t.json()).recipe)}function showDetails(e){let t=[],l=`
            <img src="${e.image_url}" alt="" class='col-sm-12 col-md-6 position-sticky top-0'>
            <div class="info py-5 col-sm-12 col-md-6">
        <h2>${e.title}</h2>
                <ul class="p-0">
        `;secShowDetails.classList.toggle("openSectoin"),t=e.ingredients;for(let s=0;s<t.length;s++)l+=`<li>* ${t[s]}</li>`;l+=`
                </ul>
            </div>
    `,secShowDetails.lastElementChild.innerHTML=l}null==localStorage.getItem("foods")?allRecipes=[]:displayRecipes(allRecipes=JSON.parse(localStorage.getItem("foods")));const iconClose=document.getElementById("icon_close");iconClose.addEventListener("click",()=>{secShowDetails.classList.toggle("openSectoin"),console.log("close")}),btnSearch.addEventListener("click",()=>{showRecipes(inpSearch.value),inpSearch.value=""}),document.body.addEventListener("load",()=>{showRecipes(inpSearch.value),inpSearch.value=""});const cateLinks=document.querySelectorAll(".menu .categories2 .cate p");cateLinks.forEach(e=>{e.addEventListener("click",()=>{cateLinks.forEach(e=>{e.classList.remove("active")}),e.classList.add("active")})});const stars=document.querySelector(".stars"),moon=document.querySelector(".moon2"),boat=document.querySelector(".boat6"),mountains3=document.querySelector(".mountains3"),mountains4=document.querySelector(".mountains4"),river5=document.querySelector(".river5"),mountains7=document.querySelector(".mountains7"),header=document.querySelector("header"),h2=document.querySelector("h2"),rawda=document.querySelector("#header .contain_img");window.addEventListener("scroll",function(){let e=scrollY;stars.style.top=`${e}px`,stars.style.left=`${e}px`,moon.style.top=`${3*e}px`,rawda.style.bottom=`${.9*e}px`,mountains3.style.top=`${1.2*e}px`,mountains4.style.top=`${1.2*e}px`,river5.style.top=`${e}px`,boat.style.top=`${e}px`,boat.style.left=`${3*e}px`,e>124?header.style.background="linear-gradient(#376281, #10001f)":header.style.background="#130c1f"});